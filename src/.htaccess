RewriteEngine On

AddCharset UTF-8 .html
AddCharset UTF-8 .php

<FilesMatch "\.(ico|jpg|jpeg|png|gif|js|css|swf)$">
	Header set Expires "access plus 1 day"
</FilesMatch>

<FilesMatch "\.(js|css|html|htm|php|xml)$">
	SetOutputFilter DEFLATE
</FilesMatch>

# Redirects
RewriteRule /framboy /projects/framboy.php [NC,L]
Redirect 301 /feed http://blog.geheimesite.nl/index.xml 

# Fix old assets directory URIs
RewriteRule ^/css/(.*)$ /assets/css/$1 [R=301,NC,L]
RewriteRule ^/js/(.*)$ /assets/js/$1 [R=301,NC,L]
RewriteRule ^/images/(.*)$ /assets/images/$1 [R=301,NC,L]

# Fix old library directory URIs
RewriteRule /library/website/version/(.*)$ /website/v/$1 R=301,[NC,L]
RewriteRule /library/projects/package/(.*)$ /projects/$1 [R=301,NC,L]
RewriteRule /library/projects/(.*)$ /projects/$1 [R=301,NC,L]
RewriteRule /library/website/overview.php /website/overview.php [R=301,NC,L]

# Remove .php from filenames
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.php [NC,L]

# Remove .html from filenames
RewriteBase /
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^([^\.]+)$ $1.html [NC,L]

# GZip compression
<IfModule mod_deflate.c>
	AddOutputFilterByType DEFLATE text/html text/plain text/xml text/css  application/x-javascript
	BrowserMatch ^Mozilla/4 gzip-only-text/html
	BrowserMatch ^Mozilla/4\.0[678] no-gzip
	BrowserMatch \bMSIE !no-gzip !gzip-only-text/html
</IfModule>

# Disable the server signature
ServerSignature Off

# limit file uploads to 100K
LimitRequestBody 102400